"use strict";(self.webpackChunkfls_start=self.webpackChunkfls_start||[]).push([[645],{645:(e,t,n)=>{n.r(t);const a=document.querySelector(".js-gen-front"),d=document.getElementById("canvas"),i=document.getElementById("js-file"),s=document.querySelectorAll(".js-upload-image"),o=document.querySelector(".js-gen-back"),l=document.querySelector("body"),r=document.querySelector(".step-text");let c,h="",u=!1,f={x:0,y:0},g={x:150,y:150};if(d){const y=d.getContext("2d");function m(){y.clearRect(0,0,d.width,d.height),y.fillStyle="white",y.fillRect(0,0,d.width,d.height),c&&y.drawImage(c,0,0,c.width,c.height),y.fillStyle="black",y.font="20px Arial",y.fillText(h,g.x,g.y)}function v(e){e.preventDefault(),e.stopPropagation()}function w(e){[...e].forEach(p)}function p(e){const t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){const e=new Image;e.src=t.result,e.onload=function(){d.width=e.width,d.height=e.height,y.drawImage(e,0,0,e.width,e.height),window.updateImage(e),a.style.display="none",o.style.display="block",l.classList.add("generator-active")}}}r.addEventListener("input",(e=>{h=e.target.value,m()})),window.updateImage=function(e){c=e,m()},i.addEventListener("change",(e=>{w(e.target.files)})),s.forEach((e=>{e.addEventListener("click",(()=>{i.click()}))})),a&&(["dragenter","dragover","dragleave","drop"].forEach((e=>{a.addEventListener(e,v,!1)})),["dragenter","dragover"].forEach((e=>{a.addEventListener(e,(()=>a.classList.add("highlight")),!1)})),["dragleave","drop"].forEach((e=>{a.addEventListener(e,(()=>a.classList.remove("highlight")),!1)})),a.addEventListener("drop",(e=>{const t=e.dataTransfer,n=t.files;t.types.includes("text/html")||w(n)})));document.querySelectorAll(".js-create-blank").forEach((e=>{e.addEventListener("click",(()=>{d.width=652,d.height=667,y.fillStyle="white",y.fillRect(0,0,d.width,d.height),a.style.display="none",o.style.display="block",l.classList.add("generator-active")}))})),d.addEventListener("mousedown",(e=>{const{offsetX:t,offsetY:n}=e;t>=g.x&&t<=g.x+y.measureText(h).width&&n>=g.y-20&&n<=g.y&&(u=!0,f.x=t-g.x,f.y=n-g.y)})),d.addEventListener("mousemove",(e=>{u&&(g.x=e.offsetX-f.x,g.y=e.offsetY-f.y,m())})),d.addEventListener("mouseup",(()=>{u=!1})),d.addEventListener("mouseout",(()=>{u=!1}))}}}]);